# PÃ©tala Healthcare - Appointments Collection
# Medical appointments scheduling and management

collections:
  - collection: appointments
    meta:
      group: petala_healthcare
      icon: event
      note: Patient appointments with providers
      display_template: "{{patient.first_name}} {{patient.last_name}} - {{appointment_date}} {{appointment_time}}"
      sort: 2

    schema:
      schema:
        name: appointments
        comment: Medical appointments

      fields:
        - field: id
          type: uuid
          schema:
            is_primary_key: true

        - field: status
          type: string
          schema:
            default_value: scheduled
          meta:
            interface: select-dropdown
            options:
              choices:
                - { text: Scheduled, value: scheduled }
                - { text: Confirmed, value: confirmed }
                - { text: Checked In, value: checked_in }
                - { text: In Progress, value: in_progress }
                - { text: Completed, value: completed }
                - { text: Cancelled, value: cancelled }
                - { text: No Show, value: no_show }
                - { text: Rescheduled, value: rescheduled }

        - field: tenant_id
          type: uuid
          schema:
            is_nullable: false

        - field: patient_id
          type: uuid
          schema:
            is_nullable: false
          meta:
            interface: select-dropdown-m2o
            required: true

        - field: provider_id
          type: uuid
          schema:
            is_nullable: false
          meta:
            interface: select-dropdown-m2o
            required: true

        - field: appointment_type
          type: string
          meta:
            interface: select-dropdown
            options:
              choices:
                - { text: Regular Checkup, value: checkup }
                - { text: Follow-up, value: follow_up }
                - { text: Consultation, value: consultation }
                - { text: Emergency, value: emergency }
                - { text: Telemedicine, value: telemedicine }
                - { text: Lab Work, value: lab_work }
                - { text: Vaccination, value: vaccination }
                - { text: Procedure, value: procedure }

        - field: appointment_date
          type: date
          schema:
            is_nullable: false
          meta:
            interface: datetime
            required: true

        - field: appointment_time
          type: time
          schema:
            is_nullable: false
          meta:
            interface: datetime
            required: true

        - field: duration_minutes
          type: integer
          schema:
            default_value: 30

        - field: reason_for_visit
          type: text
          meta:
            interface: input-multiline

        - field: symptoms
          type: text
          meta:
            interface: input-multiline

        - field: confirmation_code
          type: string
          schema:
            max_length: 20
          meta:
            readonly: true

        - field: reminder_sent_at
          type: timestamp
          meta:
            readonly: true

        - field: checked_in_at
          type: timestamp

        - field: started_at
          type: timestamp

        - field: completed_at
          type: timestamp

        - field: cancelled_at
          type: timestamp

        - field: cancellation_reason
          type: text

        - field: notes
          type: text
          meta:
            interface: input-multiline
            note: Provider notes

        - field: date_created
          type: timestamp
          meta:
            special: [date-created]
            readonly: true

        - field: date_updated
          type: timestamp
          meta:
            special: [date-updated]
            readonly: true
