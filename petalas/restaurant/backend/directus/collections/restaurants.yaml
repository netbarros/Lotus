# PÃ©tala Restaurant - Restaurants Collection
# Complete restaurant management with multi-location support

collections:
  - collection: restaurants
    meta:
      group: petala_restaurant
      icon: restaurant
      note: Main restaurant entities with multi-location support
      display_template: "{{name}} - {{cuisine_type}}"
      sort: 1

    schema:
      schema:
        name: restaurants
        comment: Restaurant profiles with complete business information

      fields:
        # Primary Identification
        - field: id
          type: uuid
          schema:
            is_primary_key: true
            has_auto_increment: false
            is_nullable: false
          meta:
            hidden: true
            readonly: true
            interface: input
            special:
              - uuid

        - field: status
          type: string
          schema:
            default_value: draft
            is_nullable: false
          meta:
            interface: select-dropdown
            options:
              choices:
                - text: Draft
                  value: draft
                - text: Active
                  value: active
                - text: Temporarily Closed
                  value: temporarily_closed
                - text: Permanently Closed
                  value: permanently_closed
            display: labels
            width: half

        - field: tenant_id
          type: uuid
          schema:
            is_nullable: false
          meta:
            interface: select-dropdown-m2o
            special:
              - m2o
            display: related-values
            width: half
            note: Multi-tenancy support (Row-Level Security)

        # Basic Information
        - field: name
          type: string
          schema:
            is_nullable: false
            max_length: 200
          meta:
            interface: input
            required: true
            width: half

        - field: slug
          type: string
          schema:
            is_nullable: false
            is_unique: true
            max_length: 200
          meta:
            interface: input
            readonly: true
            note: Auto-generated from name
            width: half

        - field: description
          type: text
          schema:
            is_nullable: true
          meta:
            interface: input-rich-text-html

        - field: cuisine_type
          type: string
          schema:
            is_nullable: false
          meta:
            interface: select-dropdown
            options:
              choices:
                - text: Italian
                  value: italian
                - text: Japanese
                  value: japanese
                - text: Chinese
                  value: chinese
                - text: Mexican
                  value: mexican
                - text: French
                  value: french
                - text: Brazilian
                  value: brazilian
                - text: American
                  value: american
                - text: Mediterranean
                  value: mediterranean
                - text: Indian
                  value: indian
                - text: Thai
                  value: thai
                - text: Korean
                  value: korean
                - text: Middle Eastern
                  value: middle_eastern
                - text: Fusion
                  value: fusion
                - text: Vegetarian/Vegan
                  value: vegetarian_vegan
                - text: Seafood
                  value: seafood
                - text: Steakhouse
                  value: steakhouse
                - text: Fast Food
                  value: fast_food
                - text: Cafe/Bakery
                  value: cafe_bakery
            width: half

        - field: price_range
          type: string
          schema:
            is_nullable: false
            default_value: moderate
          meta:
            interface: select-dropdown
            options:
              choices:
                - text: $ (Budget-friendly)
                  value: budget
                - text: $$ (Moderate)
                  value: moderate
                - text: $$$ (Upscale)
                  value: upscale
                - text: $$$$ (Fine Dining)
                  value: fine_dining
            width: half

        # Contact Information
        - field: email
          type: string
          schema:
            max_length: 255
          meta:
            interface: input
            options:
              iconLeft: email
            width: half

        - field: phone
          type: string
          schema:
            max_length: 50
          meta:
            interface: input
            options:
              iconLeft: phone
            width: half

        - field: website
          type: string
          schema:
            max_length: 500
          meta:
            interface: input
            options:
              iconLeft: link
            width: half

        # Location
        - field: address
          type: text
          schema:
            is_nullable: false
          meta:
            interface: input-multiline
            required: true

        - field: city
          type: string
          schema:
            is_nullable: false
            max_length: 100
          meta:
            interface: input
            required: true
            width: half

        - field: state
          type: string
          schema:
            max_length: 100
          meta:
            interface: input
            width: half

        - field: postal_code
          type: string
          schema:
            max_length: 20
          meta:
            interface: input
            width: half

        - field: country
          type: string
          schema:
            is_nullable: false
            default_value: Brazil
          meta:
            interface: input
            width: half

        - field: latitude
          type: float
          schema:
            is_nullable: true
          meta:
            interface: input
            width: half
            note: For map integration

        - field: longitude
          type: float
          schema:
            is_nullable: true
          meta:
            interface: input
            width: half
            note: For map integration

        # Media
        - field: logo
          type: uuid
          schema:
            is_nullable: true
          meta:
            interface: file-image
            special:
              - file
            display: image
            width: half

        - field: cover_image
          type: uuid
          schema:
            is_nullable: true
          meta:
            interface: file-image
            special:
              - file
            display: image
            width: half

        - field: gallery
          type: json
          schema:
            is_nullable: true
          meta:
            interface: files
            special:
              - files
            display: related-values

        # Operating Hours
        - field: operating_hours
          type: json
          schema:
            is_nullable: false
            default_value: |
              {
                "monday": {"open": "11:00", "close": "22:00", "closed": false},
                "tuesday": {"open": "11:00", "close": "22:00", "closed": false},
                "wednesday": {"open": "11:00", "close": "22:00", "closed": false},
                "thursday": {"open": "11:00", "close": "22:00", "closed": false},
                "friday": {"open": "11:00", "close": "23:00", "closed": false},
                "saturday": {"open": "11:00", "close": "23:00", "closed": false},
                "sunday": {"open": "11:00", "close": "21:00", "closed": false}
              }
          meta:
            interface: input-code
            options:
              language: json

        # Capacity & Features
        - field: capacity
          type: integer
          schema:
            is_nullable: false
            default_value: 50
          meta:
            interface: input
            width: half
            note: Total seating capacity

        - field: accepts_reservations
          type: boolean
          schema:
            is_nullable: false
            default_value: true
          meta:
            interface: boolean
            width: half

        - field: accepts_takeout
          type: boolean
          schema:
            is_nullable: false
            default_value: true
          meta:
            interface: boolean
            width: half

        - field: accepts_delivery
          type: boolean
          schema:
            is_nullable: false
            default_value: false
          meta:
            interface: boolean
            width: half

        - field: delivery_radius_km
          type: float
          schema:
            is_nullable: true
          meta:
            interface: input
            width: half
            note: Delivery radius in kilometers

        - field: minimum_order_delivery
          type: decimal
          schema:
            is_nullable: true
            numeric_precision: 10
            numeric_scale: 2
          meta:
            interface: input
            width: half
            options:
              iconLeft: attach_money

        - field: delivery_fee
          type: decimal
          schema:
            is_nullable: true
            numeric_precision: 10
            numeric_scale: 2
          meta:
            interface: input
            width: half
            options:
              iconLeft: attach_money

        # Features & Amenities
        - field: features
          type: json
          schema:
            is_nullable: true
            default_value: |
              {
                "parking": true,
                "wifi": true,
                "outdoor_seating": false,
                "live_music": false,
                "bar": false,
                "private_room": false,
                "wheelchair_accessible": true,
                "kids_menu": true,
                "pet_friendly": false,
                "valet_parking": false
              }
          meta:
            interface: input-code
            options:
              language: json

        # Payment Methods
        - field: payment_methods
          type: json
          schema:
            is_nullable: false
            default_value: |
              {
                "cash": true,
                "credit_card": true,
                "debit_card": true,
                "pix": true,
                "meal_voucher": false,
                "online_payment": true
              }
          meta:
            interface: input-code
            options:
              language: json

        # Social Media
        - field: social_media
          type: json
          schema:
            is_nullable: true
          meta:
            interface: input-code
            options:
              language: json
            note: |
              {
                "instagram": "@handle",
                "facebook": "page_url",
                "twitter": "@handle",
                "tiktok": "@handle"
              }

        # Ratings & Reviews
        - field: rating_avg
          type: float
          schema:
            is_nullable: true
            default_value: 0
          meta:
            interface: input
            readonly: true
            width: third

        - field: rating_count
          type: integer
          schema:
            is_nullable: false
            default_value: 0
          meta:
            interface: input
            readonly: true
            width: third

        - field: review_count
          type: integer
          schema:
            is_nullable: false
            default_value: 0
          meta:
            interface: input
            readonly: true
            width: third

        # Certifications & Compliance
        - field: health_certificate
          type: string
          schema:
            max_length: 100
          meta:
            interface: input
            width: half
            note: Health department certificate number

        - field: health_certificate_expiry
          type: date
          schema:
            is_nullable: true
          meta:
            interface: datetime
            display: datetime
            width: half

        - field: business_license
          type: string
          schema:
            max_length: 100
          meta:
            interface: input
            width: half

        # Integration & Advanced Features
        - field: pos_system
          type: string
          schema:
            is_nullable: true
          meta:
            interface: select-dropdown
            options:
              choices:
                - text: Square
                  value: square
                - text: Toast
                  value: toast
                - text: Lightspeed
                  value: lightspeed
                - text: Clover
                  value: clover
                - text: TouchBistro
                  value: touchbistro
                - text: Custom
                  value: custom
            width: half

        - field: online_ordering_enabled
          type: boolean
          schema:
            is_nullable: false
            default_value: true
          meta:
            interface: boolean
            width: half

        - field: table_qr_ordering
          type: boolean
          schema:
            is_nullable: false
            default_value: false
          meta:
            interface: boolean
            width: half
            note: QR code ordering at tables

        # SEO & Marketing
        - field: meta_title
          type: string
          schema:
            max_length: 200
          meta:
            interface: input
            note: SEO title (max 60 chars recommended)

        - field: meta_description
          type: text
          schema:
            is_nullable: true
          meta:
            interface: input-multiline
            note: SEO description (max 160 chars recommended)

        - field: meta_keywords
          type: text
          schema:
            is_nullable: true
          meta:
            interface: tags

        # Timestamps
        - field: date_created
          type: timestamp
          schema:
            is_nullable: false
          meta:
            interface: datetime
            readonly: true
            special:
              - date-created
            display: datetime
            width: half

        - field: date_updated
          type: timestamp
          schema:
            is_nullable: true
          meta:
            interface: datetime
            readonly: true
            special:
              - date-updated
            display: datetime
            width: half

        - field: user_created
          type: uuid
          schema:
            is_nullable: true
          meta:
            interface: select-dropdown-m2o
            special:
              - user-created
            display: user
            width: half
            readonly: true

        - field: user_updated
          type: uuid
          schema:
            is_nullable: true
          meta:
            interface: select-dropdown-m2o
            special:
              - user-updated
            display: user
            width: half
            readonly: true
