# üîê Environment Variables - Complete Reference

> **All 134 environment variables explained**
> **Categories**: üî¥ REQUIRED | üü° RECOMMENDED | üü¢ OPTIONAL | üîµ FUTURE

---

## üìã Quick Reference

| Category | Count | Description |
|----------|-------|-------------|
| üî¥ **REQUIRED** | 15 | Must be set for system to work |
| üü° **RECOMMENDED** | 8 | Should be set for production |
| üü¢ **OPTIONAL** | 85 | Integration points (Stripe, AWS, etc.) |
| üîµ **FUTURE** | 26 | Planned features (blockchain, quantum) |
| **TOTAL** | **134** | All variables |

---

## üî¥ REQUIRED Variables (15)

These **MUST** be set for the system to function:

### **Sofia AI** (4 vars)
```env
# Anthropic Claude AI - Powers Sofia AI intelligence
ANTHROPIC_API_KEY=sk-ant-your-key-here

# Sofia AI HTTP Server ports
SOFIA_PORT=3003
PORT=3003

# Connection to Directus
DIRECTUS_URL=http://localhost:8055
```

### **Directus** (6 vars)
```env
# Directus security keys (auto-generated by installer)
DIRECTUS_KEY=changeme-random-key-64-chars-minimum
DIRECTUS_SECRET=changeme-random-secret-64-chars-minimum

# Directus admin credentials
DIRECTUS_ADMIN_EMAIL=admin@softwarelotus.com.br
DIRECTUS_ADMIN_PASSWORD=ChangeMe123!SecurePassword

# Database connection
DIRECTUS_DB_CLIENT=pg
DIRECTUS_DB_HOST=postgres
```

### **Database** (3 vars)
```env
# PostgreSQL credentials
POSTGRES_USER=postgres
POSTGRES_PASSWORD=changeme-postgres-password
POSTGRES_DB=magicsaas
```

### **Redis** (2 vars)
```env
# Redis connection
REDIS_HOST=redis
REDIS_PORT=6379
```

---

## üü° RECOMMENDED Variables (8)

Should be set for **production** deployments:

### **Security** (3 vars)
```env
# JWT tokens (auto-generated by installer)
JWT_SECRET=changeme-super-secret-jwt-key-64-chars
JWT_EXPIRATION=7d
ENCRYPTION_KEY=changeme-encryption-key-64-chars
```

### **Monitoring** (3 vars)
```env
# Sentry error tracking
SENTRY_DSN=https://...@sentry.io/...
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=1.0
```

### **Application** (2 vars)
```env
# Production URLs
APP_URL=https://your-domain.com
API_URL=https://your-domain.com/api
```

---

## üü¢ OPTIONAL Variables (85)

### **Metronic** (1 var)
```env
# Path to Metronic 9 theme (for watcher integration)
METRONIC_PATH=/workspace/metronic
```

### **Observability** (8 vars)
```env
# Logging
LOG_LEVEL=info

# Prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_ENDPOINT=http://localhost:9090

# Grafana
GRAFANA_PORT=3002
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
GRAFANA_URL=http://localhost:3002

# Jaeger (Distributed Tracing)
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# Langfuse (ML Observability)
LANGFUSE_PUBLIC_KEY=
LANGFUSE_SECRET_KEY=
LANGFUSE_HOST=https://cloud.langfuse.com
```

### **Payment Gateways** (7 vars)
```env
# Stripe (Global payments)
STRIPE_PUBLIC_KEY=
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# Mercado Pago (PIX - Brasil)
MERCADO_PAGO_PUBLIC_KEY=
MERCADO_PAGO_ACCESS_TOKEN=
```

### **Email** (7 vars)
```env
# Email sender info
EMAIL_FROM=noreply@softwarelotus.com.br
EMAIL_FROM_NAME=MagicSaaS

# SMTP
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_SECURE=true

# Postmark (Transactional Email)
POSTMARK_API_KEY=
POSTMARK_FROM_EMAIL=noreply@softwarelotus.com.br
```

### **AWS** (6 vars)
```env
# S3 storage
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=
AWS_CLOUDFRONT_DOMAIN=

# AWS Braket (Quantum Computing - future)
AWS_BRAKET_ARN=
```

### **Cloudflare** (3 vars)
```env
# CDN, DDoS protection, Workers deployment
CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_API_TOKEN=
CLOUDFLARE_WORKERS_DOMAIN=
```

### **AI Providers** (8 vars)
```env
# OpenAI (complementary AI features)
OPENAI_API_KEY=sk-...
OPENAI_ORGANIZATION=
OPENAI_MODEL=gpt-4o

# ElevenLabs (Voice synthesis)
ELEVENLABS_API_KEY=
ELEVENLABS_VOICE_ID=
ELEVENLABS_MODEL=eleven_multilingual_v2

# Azure Speech
AZURE_SPEECH_KEY=
AZURE_SPEECH_REGION=
AZURE_SPEECH_ENDPOINT=
```

### **Communications** (4 vars)
```env
# Twilio (SMS/WhatsApp)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=
TWILIO_WHATSAPP_NUMBER=
```

### **Internal Services** (3 vars)
```env
# Inngest (Serverless Workflows)
INNGEST_EVENT_KEY=
INNGEST_SIGNING_KEY=
INNGEST_SERVE_ORIGIN=http://localhost:3000
```

### **Security** (3 vars)
```env
# Rate limiting and CORS
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
ALLOWED_ORIGINS=http://localhost:3001,http://localhost:3002
CORS_ENABLED=true
```

### **Compliance** (5 vars)
```env
# Data protection regulations
GDPR_ENABLED=true
LGPD_ENABLED=true
HIPAA_ENABLED=false
DATA_RETENTION_DAYS=2555
AUDIT_LOG_ENABLED=true
```

### **Misc** (2 vars)
```env
DEBUG=false
MAINTENANCE_MODE=false
```

---

## üîµ FUTURE Variables (26)

Planned features - keep disabled until implemented:

### **Blockchain/Web3** (5 vars)
```env
# Q2 2026 - NFT marketplace, crypto payments
WEB3_PROVIDER_URL=https://polygon-mainnet.g.alchemy.com/v2/...
WEB3_NETWORK=polygon
WEB3_MARKETPLACE_CONTRACT=0x...
WEB3_PAYMENT_TOKEN_CONTRACT=0x...
PRIVATE_KEY_DEPLOYER=
```

### **IPFS** (4 vars)
```env
# Decentralized storage for assets
IPFS_HOST=ipfs.infura.io
IPFS_PORT=5001
IPFS_PROTOCOL=https
IPFS_PROJECT_ID=
IPFS_PROJECT_SECRET=
```

### **Quantum Computing** (3 vars)
```env
# Quantum algorithms for optimization
IBM_QUANTUM_TOKEN=
IBM_QUANTUM_BACKEND=ibmq_qasm_simulator
GOOGLE_QUANTUM_PROJECT_ID=
```

### **Edge Computing** (4 vars)
```env
# Global edge deployment
EDGE_LOCATIONS=us-east,us-west,eu-west,eu-central,ap-south,ap-northeast
EDGE_AUTO_SCALING=true
EDGE_MIN_INSTANCES=3
EDGE_MAX_INSTANCES=50
```

### **Federated Learning** (4 vars)
```env
# Privacy-preserving machine learning
FL_MIN_PARTICIPANTS=10
FL_MAX_ROUNDS=100
FL_PRIVACY_BUDGET=1.0
FL_NOISE_MULTIPLIER=1.1
```

### **Feature Flags** (6 vars)
```env
# Enable/disable future features
ENABLE_VOICE_ASSISTANT=false
ENABLE_BLOCKCHAIN=false
ENABLE_QUANTUM=false
ENABLE_FEDERATED_LEARNING=false
ENABLE_MOBILE_SDK=true
ENABLE_EDGE_COMPUTING=true
```

---

## üìö How to Use

### **1. Copy .env.example**
```bash
cp .env.example .env
```

### **2. Set REQUIRED variables**
Edit `.env` and set the 15 üî¥ REQUIRED variables.

### **3. Run installer**
The installer will auto-generate secure keys for:
- `DIRECTUS_KEY`
- `DIRECTUS_SECRET`
- `JWT_SECRET`
- `ENCRYPTION_KEY`
- `POSTGRES_PASSWORD`

### **4. Optional: Add integrations**
Add üü¢ OPTIONAL variables as needed for integrations (Stripe, AWS, etc.)

---

## üîí Security Best Practices

### **Never commit .env to Git**
```bash
# .gitignore already includes:
.env
.env.local
.env.*.local
```

### **Use strong passwords**
```bash
# Good (64 chars, random):
DIRECTUS_KEY=7f9a2b5c8d1e6g3h4i0j9k8l7m6n5o4p3q2r1s0t9u8v7w6x5y4z3a2b1c0d9e8f7g

# Bad (weak):
DIRECTUS_KEY=password123
```

### **Rotate keys regularly**
- Development: Every 90 days
- Production: Every 30 days
- After security incident: Immediately

### **Use secrets management**
For production, use:
- **AWS Secrets Manager**
- **HashiCorp Vault**
- **Azure Key Vault**
- **Google Secret Manager**

---

## üêõ Troubleshooting

### **Problem: "ANTHROPIC_API_KEY invalid"**
```bash
# Verify key format
echo $ANTHROPIC_API_KEY
# Should start with: sk-ant-

# Get new key at: https://console.anthropic.com
```

### **Problem: "Directus can't connect to database"**
```bash
# Check PostgreSQL is running
docker ps | grep postgres

# Verify POSTGRES_PASSWORD matches in:
# - POSTGRES_PASSWORD
# - DIRECTUS_DB_PASSWORD
# - DATABASE_URL
```

### **Problem: "Sofia AI returns 503"**
```bash
# Check DIRECTUS_URL and REDIS_HOST
echo $DIRECTUS_URL
echo $REDIS_HOST

# Verify services are running
docker ps | grep -E "directus|redis"
```

---

## üìñ Environment Examples

### **Development (.env.development)**
```env
NODE_ENV=development
ANTHROPIC_API_KEY=sk-ant-dev-key
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/magicsaas_dev
DIRECTUS_URL=http://localhost:8055
LOG_LEVEL=debug
DEBUG=true
```

### **Production (.env.production)**
```env
NODE_ENV=production
ANTHROPIC_API_KEY=sk-ant-prod-key
DATABASE_URL=postgresql://postgres:STRONG_PASSWORD@prod-db:5432/magicsaas
DIRECTUS_URL=https://api.magicsaas.ai
LOG_LEVEL=info
DEBUG=false
SENTRY_DSN=https://...@sentry.io/...
```

### **Testing (.env.test)**
```env
NODE_ENV=test
ANTHROPIC_API_KEY=sk-ant-test-key
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/magicsaas_test
DIRECTUS_URL=http://localhost:8055
LOG_LEVEL=error
```

---

**[‚Üê Voltar ao √çndice](../00-INDEX.md)** | **[Pr√≥ximo: Troubleshooting ‚Üí](./troubleshooting.md)**
